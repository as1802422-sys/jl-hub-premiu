-- JL Hub (Safe UI) - Fullscreen + Categorias √† esquerda
-- Key system -> se v√°lida, abre Hub fullscreen com categorias:
-- Left: categorias; Right: conte√∫do da categoria (toggles/controles UI-only)
-- N√ÉO realiza a√ß√µes que afetem o jogo (apenas simula√ß√µes/visuais).

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local cg = game:GetService("CoreGui")

local plr = Players.LocalPlayer

local ISMobile = UIS.TouchEnabled and not UIS.KeyboardEnabled
local UIAbsoluteSize = workspace.CurrentCamera and workspace.CurrentCamera.ViewportSize or Vector2.new(1280,720)
local deviceWidth, deviceHeight = UIAbsoluteSize.X, UIAbsoluteSize.Y

local KEY = "jl123bc"
local KEYLINK = "https://discord.gg/JT4KdfVta"

-- cleanup old GUIs
for _,v in pairs({"JLHubKey","JLHubMain"}) do if cg:FindFirstChild(v) then cg[v]:Destroy() end end

-- ---------- Key GUI ----------
local kgui = Instance.new("ScreenGui", cg)
kgui.Name = "JLHubKey"; kgui.IgnoreGuiInset = true
local kbg = Instance.new("Frame", kgui)
kbg.Name = "KeyBG"
kbg.BackgroundColor3 = Color3.fromRGB(20,21,22)
kbg.BackgroundTransparency = 0.06
kbg.Size = ISMobile and UDim2.new(0, 300, 0, 160) or UDim2.new(0,380,0,200)
kbg.Position = UDim2.new(0.5,-kbg.Size.X.Offset/2,0.5,-kbg.Size.Y.Offset/2)
Instance.new("UICorner",kbg).CornerRadius=UDim.new(0,ISMobile and 10 or 14)

local ktitle = Instance.new("TextLabel",kbg)
ktitle.Size = UDim2.new(1,0,0,40); ktitle.BackgroundTransparency = 1
ktitle.Font = Enum.Font.GothamBold; ktitle.Text = "üîë JL Hub - Key"
ktitle.TextColor3 = Color3.fromRGB(40,255,180); ktitle.TextSize = ISMobile and 16 or 22

local kinput = Instance.new("TextBox", kbg)
kinput.Size = ISMobile and UDim2.new(1,-28,0,34) or UDim2.new(1,-36,0,44)
kinput.Position = UDim2.new(0,14,0,56)
kinput.BackgroundColor3 = Color3.fromRGB(22,33,35)
kinput.PlaceholderText = "Digite sua Key..."
kinput.TextColor3 = Color3.fromRGB(220,255,220)
kinput.Font = Enum.Font.Gotham; kinput.TextSize = ISMobile and 14 or 18
Instance.new("UICorner", kinput).CornerRadius = UDim.new(0,8)

local kmensagem = Instance.new("TextLabel", kbg)
kmensagem.Size = UDim2.new(1,-16,0,20)
kmensagem.Position = UDim2.new(0,8,0,106)
kmensagem.BackgroundTransparency = 1
kmensagem.Font = Enum.Font.Gotham; kmensagem.TextSize = 14
kmensagem.TextColor3 = Color3.fromRGB(255,100,100)

local kentrar = Instance.new("TextButton", kbg)
kentrar.Size = UDim2.new(0.44,0,0,34)
kentrar.Position = UDim2.new(0.06,0,1,-46)
kentrar.BackgroundColor3 = Color3.fromRGB(28,180,85)
kentrar.Font = Enum.Font.GothamBold; kentrar.Text = "Entrar"; kentrar.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", kentrar).CornerRadius = UDim.new(0,8)

local kdisc = Instance.new("TextButton", kbg)
kdisc.Size = kentrar.Size
kdisc.Position = UDim2.new(0.5,8,1,kentrar.Position.Y.Offset)
kdisc.BackgroundColor3 = Color3.fromRGB(67,92,212)
kdisc.Font = Enum.Font.GothamBold; kdisc.Text = "Pegar Key"; kdisc.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", kdisc).CornerRadius = UDim.new(0,8)
kdisc.MouseButton1Click:Connect(function()
    pcall(function() setclipboard(KEYLINK) end)
    kmensagem.TextColor3 = Color3.fromRGB(80,180,255)
    kmensagem.Text = "Link Discord copiado!"
end)

-- ---------- Helpers ----------
local function Notify(msg)
    pcall(function()
        StarterGui:SetCore("SendNotification", {Title="JL Hub", Text = msg, Duration = 2.4})
    end)
end

local function createToggleRow(parent, labelText, onToggle)
    local row = Instance.new("Frame", parent)
    row.Size = UDim2.new(1, -24, 0, ISMobile and 60 or 46)
    row.BackgroundTransparency = 1

    local lbl = Instance.new("TextLabel", row)
    lbl.Position = UDim2.new(0,8,0,0)
    lbl.Size = UDim2.new(0.66,0,1,0)
    lbl.BackgroundTransparency = 1
    lbl.Font = Enum.Font.GothamBold
    lbl.TextSize = ISMobile and 18 or 16
    lbl.TextColor3 = Color3.fromRGB(230,230,230)
    lbl.Text = labelText
    lbl.TextXAlignment = Enum.TextXAlignment.Left

    local tbtn = Instance.new("TextButton", row)
    tbtn.Size = ISMobile and UDim2.new(0,86,0,40) or UDim2.new(0.26,0,0,34)
    tbtn.Position = UDim2.new(1, - (ISMobile and 96 or 12) - tbtn.Size.X.Offset, 0, (row.Size.Y.Offset - tbtn.Size.Y.Offset)/2)
    tbtn.BackgroundColor3 = Color3.fromRGB(77,82,96)
    tbtn.Font = Enum.Font.GothamBold
    tbtn.TextSize = ISMobile and 16 or 16
    tbtn.TextColor3 = Color3.new(1,1,1)
    tbtn.Text = "OFF"
    Instance.new("UICorner", tbtn).CornerRadius = UDim.new(0,8)

    local state = false
    local function update()
        if state then
            tbtn.BackgroundColor3 = Color3.fromRGB(10,200,60)
            tbtn.Text = "ON"
        else
            tbtn.BackgroundColor3 = Color3.fromRGB(77,82,96)
            tbtn.Text = "OFF"
        end
    end
    tbtn.MouseButton1Click:Connect(function()
        state = not state
        update()
        if onToggle then pcall(onToggle, state) end
    end)
    update()
    return row, function() return state end, function(v) state=v; update() end
end

-- ---------- ABRIR HUB (fullscreen) ----------
local function ABRIR_HUB()
    kgui:Destroy()

    -- main screen gui
    local sg = Instance.new("ScreenGui", cg)
    sg.Name = "JLHubMain"; sg.IgnoreGuiInset = true; sg.ResetOnSpawn = false

    -- background overlay (dim)
    local overlay = Instance.new("Frame", sg)
    overlay.Size = UDim2.new(1,0,1,0)
    overlay.Position = UDim2.new(0,0,0,0)
    overlay.BackgroundColor3 = Color3.fromRGB(10,10,12)
    overlay.BackgroundTransparency = 0.06

    -- Hub container full screen
    local hub = Instance.new("Frame", sg)
    hub.Name = "HubFull"
    hub.Size = UDim2.new(1,0,1,0)
    hub.Position = UDim2.new(0,0,0,0)
    hub.BackgroundColor3 = Color3.fromRGB(20,24,28)
    hub.BackgroundTransparency = 0.04
    hub.BorderSizePixel = 0
    Instance.new("UICorner", hub).CornerRadius = UDim.new(0,0)

    -- Title bar
    local titleBar = Instance.new("Frame", hub)
    titleBar.Size = UDim2.new(1,0,0, ISMobile and 56 or 72)
    titleBar.Position = UDim2.new(0,0,0,0)
    titleBar.BackgroundTransparency = 1
    local title = Instance.new("TextLabel", titleBar)
    title.Text = "üå≥ JL Hub - Fullscreen"
    title.Font = Enum.Font.GothamBlack
    title.TextSize = ISMobile and 18 or 28
    title.TextColor3 = Color3.fromRGB(120,200,255)
    title.BackgroundTransparency = 1
    title.Size = UDim2.new(1,-140,1,0)
    title.Position = UDim2.new(0,20,0,0)
    title.TextXAlignment = Enum.TextXAlignment.Left

    local closeBtn = Instance.new("TextButton", titleBar)
    closeBtn.Text = "‚úï"; closeBtn.Font = Enum.Font.GothamBlack
    closeBtn.TextSize = ISMobile and 16 or 22
    closeBtn.Size = ISMobile and UDim2.new(0,44,0,36) or UDim2.new(0,48,0,40)
    closeBtn.Position = UDim2.new(1,-(ISMobile and 64 or 80),0,(ISMobile and 10 or 16))
    closeBtn.BackgroundColor3 = Color3.fromRGB(25,28,35); closeBtn.TextColor3 = Color3.fromRGB(220,220,220)
    Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0,8)
    closeBtn.MouseButton1Click:Connect(function()
        sg:Destroy()
    end)

    -- Layout: left categories column + right content area
    local leftWidth = ISMobile and 180 or 240
    local leftCol = Instance.new("Frame", hub)
    leftCol.Size = UDim2.new(0, leftWidth, 1, -titleBar.Size.Y.Offset - 20)
    leftCol.Position = UDim2.new(0, 12, 0, titleBar.Size.Y.Offset + 12)
    leftCol.BackgroundColor3 = Color3.fromRGB(16,18,22)
    leftCol.BackgroundTransparency = 0.03
    leftCol.BorderSizePixel = 0
    Instance.new("UICorner", leftCol).CornerRadius = UDim.new(0,10)

    local rightCol = Instance.new("Frame", hub)
    rightCol.Size = UDim2.new(1, -(leftWidth+48), 1, -titleBar.Size.Y.Offset - 20)
    rightCol.Position = UDim2.new(0, leftWidth + 24, 0, titleBar.Size.Y.Offset + 12)
    rightCol.BackgroundColor3 = Color3.fromRGB(22,26,30)
    rightCol.BackgroundTransparency = 0.02
    rightCol.BorderSizePixel = 0
    Instance.new("UICorner", rightCol).CornerRadius = UDim.new(0,10)

    -- Left: category buttons
    local catLayout = Instance.new("UIListLayout", leftCol)
    catLayout.Padding = UDim.new(0,8)
    catLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    catLayout.SortOrder = Enum.SortOrder.LayoutOrder
    catLayout.Padding = UDim.new(0,8)

    local categories = {"Main","Combat","Utility","Islands","Settings"}
    local catButtons = {}
    local activeCategory = "Main"

    local function clearRight()
        for _,c in pairs(rightCol:GetChildren()) do
            if not c:IsA("UIListLayout") and c ~= titleBar and c.Name ~= "RightPadding" then
                c:Destroy()
            end
        end
    end

    local function setActiveCat(name)
        activeCategory = name
        for n,btn in pairs(catButtons) do
            btn.BackgroundColor3 = (n==name) and Color3.fromRGB(50,90,140) or Color3.fromRGB(30,34,42)
        end
        -- repopulate right area
        clearRight()
        -- container scroll for content
        local content = Instance.new("ScrollingFrame", rightCol)
        content.Name = "ContentScroll"
        content.Size = UDim2.new(1,-24,1,-24)
        content.Position = UDim2.new(0,12,0,12)
        content.BackgroundTransparency = 1
        content.ScrollBarThickness = 8
        content.AutomaticCanvasSize = Enum.AutomaticSize.Y
        local layout = Instance.new("UIListLayout", content)
        layout.Padding = UDim.new(0,12)
        layout.SortOrder = Enum.SortOrder.LayoutOrder

        if name == "Main" then
            -- Auto Farm
            local row, getState, setState = createToggleRow(content, "AUTO FARM", function(state)
                if state then Notify("Auto Farm (simulado) ativado.") else Notify("Auto Farm desligado.") end
            end)
            row.LayoutOrder = 1
            -- Auto Boss
            local row2, getState2, setState2 = createToggleRow(content, "AUTO BOSS", function(state)
                if state then Notify("Auto Boss (simulado) ativado.") else Notify("Auto Boss desligado.") end
            end)
            row2.LayoutOrder = 2

        elseif name == "Combat" then
            createToggleRow(content, "ESP (lista UI)", function(s)
                Notify("ESP (visual) "..(s and "ativado" or "desativado"))
            end).LayoutOrder = 1
            createToggleRow(content, "AIMBOT (crosshair visual)", function(s)
                Notify("Aimbot visual "..(s and "ativado" or "desativado"))
            end).LayoutOrder = 2
            createToggleRow(content, "AUTO HAKI (simulado)", function(s)
                Notify("Auto Haki "..(s and "ativado" or "desativado"))
            end).LayoutOrder = 3

        elseif name == "Utility" then
            createToggleRow(content, "ANTI AFK (simulado)", function(s)
                Notify("Anti AFK "..(s and "ativado" or "desativado"))
            end).LayoutOrder = 1
            createToggleRow(content, "FLOOD (log local)", function(s)
                Notify("Flood (log) "..(s and "ativado" or "desativado"))
            end).LayoutOrder = 2

        elseif name == "Islands" then
            -- islands dropdown display
            local islands = {"Starter Island","Second Island","Third Island","Fourth Island"}
            local currentIndex = 1
            local rowFrame = Instance.new("Frame", content)
            rowFrame.Size = UDim2.new(1,-24,0,56)
            rowFrame.BackgroundTransparency = 1
            rowFrame.LayoutOrder = 1
            local lbl = Instance.new("TextLabel", rowFrame)
            lbl.Size = UDim2.new(0.6,0,1,0)
            lbl.Position = UDim2.new(0,8,0,0)
            lbl.BackgroundTransparency = 1
            lbl.Font = Enum.Font.GothamBold
            lbl.TextSize = ISMobile and 18 or 16
            lbl.TextColor3 = Color3.fromRGB(230,230,230)
            lbl.Text = "Ilha selecionada: "..islands[currentIndex]
            lbl.TextXAlignment = Enum.TextXAlignment.Left

            local nextBtn = Instance.new("TextButton", rowFrame)
            nextBtn.Size = ISMobile and UDim2.new(0,86,0,40) or UDim2.new(0.26,0,0,34)
            nextBtn.Position = UDim2.new(1,-(ISMobile and 96 or 12) - nextBtn.Size.X.Offset,0,(rowFrame.Size.Y.Offset - nextBtn.Size.Y.Offset)/2)
            nextBtn.BackgroundColor3 = Color3.fromRGB(60,70,100)
            nextBtn.Font = Enum.Font.GothamBold
            nextBtn.TextColor3 = Color3.fromRGB(240,240,255)
            nextBtn.Text = "Pr√≥xima Ilha"
            Instance.new("UICorner", nextBtn).CornerRadius = UDim.new(0,8)
            nextBtn.MouseButton1Click:Connect(function()
                currentIndex = currentIndex + 1
                if currentIndex > #islands then currentIndex = 1 end
                lbl.Text = "Ilha selecionada: "..islands[currentIndex]
                Notify("Ilha selecionada: "..islands[currentIndex].." (sem teleporte)")
            end)
        elseif name == "Settings" then
            -- Example settings: show/hide overlay, reset position (not applicable fullscreen)
            local t1 = createToggleRow(content, "Mostrar Overlay", function(s)
                overlay.Visible = s
                Notify("Overlay "..(s and "vis√≠vel" or "oculto"))
            end)
            t1.LayoutOrder = 1
            local btn = Instance.new("TextButton", content)
            btn.Size = UDim2.new(1,-24,0,42)
            btn.BackgroundColor3 = Color3.fromRGB(60,60,70)
            btn.Font = Enum.Font.GothamBold
            btn.Text = "Fechar Hub"
            btn.TextColor3 = Color3.fromRGB(240,240,240)
            btn.LayoutOrder = 2
            Instance.new("UICorner", btn).CornerRadius = UDim.new(0,8)
            btn.MouseButton1Click:Connect(function() sg:Destroy() end)
        end

        -- wait small tick to let UIListLayout update
        wait()
    end

    -- create category buttons
    for i,cat in ipairs(categories) do
        local btn = Instance.new("TextButton", leftCol)
        btn.Name = "Cat_"..cat
        btn.Size = UDim2.new(1,-16,0, ISMobile and 56 or 48)
        btn.Position = UDim2.new(0,8,0,0)
        btn.AnchorPoint = Vector2.new(0,0)
        btn.BackgroundColor3 = (cat == activeCategory) and Color3.fromRGB(50,90,140) or Color3.fromRGB(30,34,42)
        btn.Font = Enum.Font.GothamBold
        btn.TextSize = ISMobile and 16 or 16
        btn.TextColor3 = Color3.fromRGB(230,230,230)
        btn.Text = cat
        Instance.new("UICorner", btn).CornerRadius = UDim.new(0,8)
        btn.LayoutOrder = i
        btn.MouseButton1Click:Connect(function()
            setActiveCat(cat)
        end)
        catButtons[cat] = btn
    end

    -- initial populate
    setActiveCat(activeCategory)

    -- ESC to toggle visibility
    UIS.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        if input.KeyCode == Enum.KeyCode.Escape then
            if hub.Visible then
                hub.Visible = false
            else
                hub.Visible = true
            end
        end
    end)

    Notify("JL Hub carregado (fullscreen).")
end

kentrar.MouseButton1Click:Connect(function()
    if kinput.Text == KEY then
        kmensagem.TextColor3 = Color3.fromRGB(93,255,122)
        kmensagem.Text = "Key correta! Abrindo hub..."
        wait(0.25)
        ABRIR_HUB()
    else
        kmensagem.TextColor3 = Color3.fromRGB(255,93,119)
        kmensagem.Text = "Key INCORRETA! Pegue no Discord."
    end
end)
